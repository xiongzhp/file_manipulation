# sed -e 's/\(^>.*$\)/#\1#/' input.fa \
#     | tr -d "\r" \
#     | tr -d "\n" \
#     | sed -e 's/$/#/' \
#     | tr "#" "\n" \
#     | sed -e '/^$/d' \
#     | awk '{ if ($0 ~ /^>/) { print $0; } else { print substr($0, 1, 45); } }' \
#     > output.fa

import sys
import itertools
with open(sys.argv[-2],'r') as infile:
    with open(sys.argv[-1],'w') as outfile:
        try:
            snp = [8,9,10,11,12,13,27,29,73,78,82,103,107,108,109,111,112,115,122,125,127,135,141,145,150,152,155,159,160,198,203,213,231,233,240,248,260,262,264,270,275,289,291,315,325,348,360,361,373,375,412,444,448,450,455,461,487,505,519,552,575,577,607,609,622,624,627,633,635,661,685,693,698,711,729,730,737,765,779,786,787,793,807,817,829,842,848,865,874,896,898,918,942,949,956,958,971,977,984,987,990,1002,1009,1032,1041,1060,1061,1082,1088,1097,1120,1122,1145,1150,1173,1182,1191,1193,1198,1206,1207,1228,1239,1243,1265,1271,1272,1277,1287,1291,1299,1301,1302,1305,1310,1328,1331,1347,1356,1371,1379,1390,1396,1401,1406,1417,1441,1463,1479,1517,1544,1560,1596,1610,1619,1673,1675,1678,1681,1689,1715,1719,1753,1786,1838,1859,1860,1864,1872,1874,1876,1904,1911,1951,1964,1976,1987,2041,2059,2070,2076,2087,2088,2091,2118,2123,2124,2125,2128,2129,2192,2199,2282,2284,2285,2286,2290,2291,2292,2294,2295,2296,2297,2299,2320,2358,2359,2360,2362,2369,2447,2451,2455,2457,2461,2584,2588,2589,2596,2600,2613,2623,2636,2646,2661,2681,2696,2717,2724,2734,2751,2767,2780,2789,2797,2799,2802,2804,2809,2811,2817,2833,2844,2849,2869,2896,2898,2899,2901,2906,2910,2911,2950,2960,2964,2971,3011,3032,3037,3041,3046,3047,3048,3049,3052,3067,3076,3078,3081,3082,3086,3091,3097,3109,3146,3156,3163,3164,3165,3169,3172,3173,3174,3176,3192,3225,3241,3306,3309,3330,3335,3353,3355,3368,3374,3389,3392,3393,3394,3398,3400,3403,3404,3405]
            for line in infile:
                if line.startswith('>'):
                    outfile.write(line)
                else:
                    residue = [line[index-1] for index in snp]
                    seq = ''.join(residue)
                    outfile.write(seq + '\n')
        except StopIteration:
            print 'All done processing %s fasta lines!' % counter